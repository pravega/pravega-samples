buildscript {
    repositories {
        jcenter()
    }
}

plugins {
    id 'org.hidetake.ssh' version '2.8.0'
}

subprojects {
    repositories {
        mavenLocal()
        jcenter()
        mavenCentral()
        maven {
            url "https://repository.apache.org/snapshots"
        }
    }
    
    plugins.withType(org.gradle.api.plugins.JavaPlugin) {
        group "io.pravega"
        version samplesVersion
    }

    remotes {
        dcos {
            host = dcosAddress
            user = 'centos'
            agent = true
        }
    }
    ssh.settings {
        knownHosts = allowAnyHosts
    }

    afterEvaluate {
        task upload(type: Exec, dependsOn: installDist) {
            commandLine 'rsync', '-az', project.installDist.destinationDir, "${remotes.dcos.user}@${remotes.dcos.host}:~"
        }
    }
}
